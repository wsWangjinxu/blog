---
title: 谈谈前端路由
tags: 前端路由
category: JavaScript
---

## 一、单页面应用与前端路由

在传统的 Web 开发中，浏览器根据地址栏的 URL 向服务器发送一个 HTTP 请求，服务器根据 URL 返回一个 HTML 页面。这种情况下，一个 URL 对应一个 HTML 页面，
一个 Web 应用包含很多 HTML 页面，这样的应用就是多页面应用；在多页面应用中，**页面路由的控制由服务器负责**，这种路由方式称为后端路由。

在多页面应用中，每次页面切换都需要向服务器发送一次请求，页面使用的静态资源也需要重新加载，存在一定的浪费。而且，页面的整体刷新对用户体验也有影响，因为不同页面
间往往存在共同的部分，例如导航栏、侧边栏等，页面整体刷新也会导致公共部分的刷新。

有没有一种方式让 Web 应用只是看起来像多页面应用，也就是说 URL 的变化可以引起页面内容的变化，但不会向服务器发送新的请求哪？满足这种条件的 Web 应用就是单页面
应用（Single Page Application，简称 SPA）。单页面应用虽然名为”单页“，但视觉上的感受仍然是多页面，因为 URL 发生变化，页面上的内容也会变化，但这只是逻辑上的多页面，实际上无论 URL 如何变化，对应的 HTML 文件都是同一个，这也是单页面应用名字的由来。在单页面应用中，**URL 发生变化并不会向服务器发送新的请求**，所以”逻辑页面“的变化只能由前端负责，这种方式称为前端路由。

## 二、前端路由的实现

**路由就是URL到函数的映射**，这个是前端路由的原理。如果做到在 URL 发生变化的时候不向服务器发送请求，而是去执行一个控制 UI 组件的函数哪？那就不得不说说 hash 和 history 这两种实现方案了。

### 2.1 基于 hash

在一个 URL 的组成中，`#`号包括`#`号后边的部分称为 hash。在浏览器中，可以同过`location.hash`获取到。`#`代表网页中的一个位置，其右边的字符，就是该位置的标识符。比如：

```
http://www.example.com/index.html#title
```
`#`号是用来指导浏览器动作的，对服务器完全不起作用，HTTP 请求不会带上`#`号以及它后边的内容。单单改变`#`号后边的内容，浏览器只会滚动到指定的位置，不会重新加载网页。而且改变 hash 还会改变浏览器的历史记录。我们可以通过`onhashchange`监听到 hash 的改变。了解了以上这些特性，是不是已经有思路了哪？可以通过将路由定义为不同的 hash


## 参考内容
+ [URL中的hash](https://www.cnblogs.com/m2maomao/p/10611983.html)
+ [React 进阶之路](https://book.douban.com/subject/30210697/)


