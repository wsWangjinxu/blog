---
title: 关于浏览器记住密码的一些探索
date: 2018-12-19 00:05:05
category: 浏览器
---

网站升级为https协议以后都可以很好的解决这个问题，但是对于不是https协议的网站也想实现这个相对来说是比较困难的。存在各种兼容性问题，尤其是360安全浏览器。

360安全浏览器会选择所有`type="password"`类型的`input`，类似`jQuery`选择器的做法。然后在获取焦点的同时，将识别`type="password"`的`input`填充上浏览器记住的密码，然后自然而然的将上一个
`input`填充为帐号。如果仅仅是在获取焦点的时候将输入框的不能输入状态变为输入状态，是不能够适用于360安全浏览器（当然还是可以骗过一些浏览器）。解决的思路是在原有生效的帐号密码的输入框的上方再添加一组输入框，而且是可以输入的。用绝对定位设置层级，将他们放到用户碰不到的地方。然后初始的时候假的输入框可以输入，真的不可以输入，真的输入框在获取焦点的时候变为可以输入。这样的话360安全浏览器会在第一时间将记住的密码填充到假的输入框中，此时真的输入框是不能输入的。当用户输入真的输入框的时候，360安全浏览器已经检测到填充成功，就不会再来填充下方的输入框了。

```
<!-- HTML -->
<div class="hiddenInput">
  <input type="text" />
  <input type="password" />
</div>

<div class="showInput">
  <input type="text" />
  <input type="password" readonly onfocus="this.removeAttribute('readonly')" />
</div>

<!-- CSS -->
<style>
  /* .hiddenInput 通过定位，然后设置z-index将假的输入框放到用户触摸不到的地方
  具体代码不展示，实现方式较多 */
</style>
```