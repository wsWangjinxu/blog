<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>常用页面尺寸与位置的获取 | 似水年华</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">常用页面尺寸与位置的获取</h1><a id="logo" href="/.">似水年华</a><p class="description">山水之间，并无岁月；人之境遇，方有春秋</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">常用页面尺寸与位置的获取</h1><div class="post-meta">Oct 20, 2019<span> | </span><span class="category"><a href="/categories/JavaScript/">JavaScript</a></span></div><div class="post-content"><p>最近开发中使用了一个电商放大镜组件，遇到了这方面的问题。日常开发中，也经常会获取一个元素的尺寸与位置，借此机会，总结下来。</p>
<h2 id="常见的尺寸与位置分类"><a href="#常见的尺寸与位置分类" class="headerlink" title="常见的尺寸与位置分类"></a>常见的尺寸与位置分类</h2><p>在 web 页面开发中，尺寸和位置大致分为以下几类：</p>
<ul>
<li>屏幕的尺寸和位置</li>
<li>元素尺寸和位置（文档，算是一个特殊的元素）</li>
<li>鼠标的位置</li>
</ul>
<h3 id="屏幕的尺寸和位置"><a href="#屏幕的尺寸和位置" class="headerlink" title="屏幕的尺寸和位置"></a>屏幕的尺寸和位置</h3><p>其中屏幕的尺寸和位置是通过<code>window.screen</code>对象来获取的，这里包含我们设备屏幕的一些信息，其中与尺寸和位置有关的如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">screen.width <span class="comment">// 屏幕的像素宽度</span></span><br><span class="line">screen.height <span class="comment">// 屏幕的像素高度</span></span><br><span class="line">screen.availHeight <span class="comment">// 返回浏览器窗口在屏幕上可占用的垂直空间，即最大高度</span></span><br><span class="line">screen.availWidth <span class="comment">// 返回浏览器窗口可占用的水平宽度（单位：像素）</span></span><br><span class="line">screen.availLeft <span class="comment">// 返回浏览器可用空间左边距离屏幕（系统桌面）左边界的距离</span></span><br><span class="line">screen.availTop <span class="comment">// 浏览器窗口在屏幕上的可占用空间上边距离屏幕上边界的像素值，在 mac 上就是任务栏的高度</span></span><br></pre></td></tr></table></figure>
<p>需要说明的是可占用宽度和高度，并<strong>不是实际占用的宽度和高度</strong>，如果你缩小的浏览器的窗口，这两个值依然不会更改。对于<code>availLeft</code>来说，大多数情况下，该属性返回都是 0，如果你在有两个屏幕的电脑上使用该属性，在右侧屏幕计算该属性时，会返回左侧屏幕的宽度。在 windows 中，该属性取决于哪个屏幕被设为主屏幕，返回相对于主屏幕左边界的 X 坐标。</p>
<h3 id="元素的尺寸和位置"><a href="#元素的尺寸和位置" class="headerlink" title="元素的尺寸和位置"></a>元素的尺寸和位置</h3><p>元素的尺寸与盒子模型和 CSS有关。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">element.clientWidth </span><br><span class="line">element.clientHeight</span><br><span class="line"><span class="comment">// 以上两个属性都是只读属性，对于没有定义 CSS 或者 内联布局盒子的元素为 0，否则，他是元素内部的宽高，</span></span><br><span class="line"><span class="comment">// 包含 padding，但不包括滚动条、边框和外边框。</span></span><br><span class="line"></span><br><span class="line">element.offsetWidth</span><br><span class="line">element.offsetHeight</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以上两个属性都是只读属性，它返回该元素的像素宽高，包含该元素的垂直内边距和边框，且是一个整数。</span></span><br><span class="line"><span class="comment">// 通常，元素的offsetHeight是一种元素 CSS 宽高的衡量标准，包括元素的 border、</span></span><br><span class="line"><span class="comment">// padding 和元素的水平滚动条（如果存在且渲染的话），不包含:before或:after等伪类元素的高度</span></span><br><span class="line"></span><br><span class="line">element.scrollWidth</span><br><span class="line">element.scrollHeight</span><br><span class="line"><span class="comment">// 以上两个只读属性是元素内容宽度的一种度量，包括由于 overflow 溢出而在屏幕上不可见的内容。</span></span><br><span class="line"><span class="comment">// 上面的宽高等于元素在不使用滚动条的情况下为了适用视口中所用内容所需的最小高度。</span></span><br><span class="line"><span class="comment">// 在没有滚动条的情况下与 clientHeight 和 clientWidth 相同</span></span><br></pre></td></tr></table></figure>
<p>与元素的位置相关属性都是相对位置，如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 元素的尺寸</span></span><br><span class="line">element.offsetParent <span class="comment">// 获取偏移容器</span></span><br><span class="line">element.offsetLeft; <span class="comment">// 元素相对与偏移容器的左边的偏移量</span></span><br><span class="line">element.offsetTop; <span class="comment">// 元素相对于偏移容器的顶边的偏移量</span></span><br><span class="line">  </span><br><span class="line">element.clientLeft; <span class="comment">// 通常情况下是元素盒子的左边框的宽度</span></span><br><span class="line">eelementle.clientTop; <span class="comment">// 通常情况下是元素盒子的顶边框的宽度</span></span><br><span class="line">  </span><br><span class="line">element.scrollLeft; <span class="comment">// 横向滚动条相对于滚动区域宽度(scrollWidth)的位置【滚动条的位置】</span></span><br><span class="line">element.scrollTop; <span class="comment">//纵向滚动条相对于滚动区域高度(scrollHeight)的位置【滚动条的位置】</span></span><br><span class="line"></span><br><span class="line">element.scrollLeft = <span class="number">30</span>; <span class="comment">//设置内容区域滚动到30的位置</span></span><br><span class="line">element.scrollTop = <span class="number">50</span>; <span class="comment">//设置内容区域滚动到50的位置</span></span><br></pre></td></tr></table></figure></p>
<h4 id="特殊元素——页面尺寸与位置的获取"><a href="#特殊元素——页面尺寸与位置的获取" class="headerlink" title="特殊元素——页面尺寸与位置的获取"></a>特殊元素——页面尺寸与位置的获取</h4><p>特殊的元素<code>html</code>或者是<code>body</code>，都可以用来获取页面的尺寸与位置（使用 CSS Reset 去掉<code>body</code>的默认<code>margin</code>后，<code>body</code>与<code>html</code>重合），也包含上述的几种属性，只是这两个元素的<code>offsetParent</code>都是<code>null</code>。通过设置<code>scrollTop</code>或者<code>scrollWidth</code>可以让页面滚动到具体的位置。下面是通常用来获取这两个元素的方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.documentElement <span class="comment">// 获取 html</span></span><br><span class="line"><span class="built_in">document</span>.body <span class="comment">// 获取 body</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 借助 html 获取 viewport 的大小，要获取 html 的大小可以使用 offsetHeight 和 offsetWidth</span></span><br><span class="line"><span class="built_in">document</span>.documentElement.clientWidth</span><br><span class="line"><span class="built_in">document</span>.documentElement.clientHeight</span><br></pre></td></tr></table></figure>
<h3 id="获取鼠标的位置"><a href="#获取鼠标的位置" class="headerlink" title="获取鼠标的位置"></a>获取鼠标的位置</h3><p>鼠标的位置是从鼠标事件中获取的，在事件发生的时候，<code>event</code>对象中有一些属性与鼠标的位置相关。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.documentElement.addEventListener(<span class="string">"click"</span>, event =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"相对于浏览器客户区的位置X:"</span>,event.clientX);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"相对于浏览器客户区的位置Y:"</span>,event.clientY);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"相对于页面的位置X:"</span>,event.clientX);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"相对于页面的位置Y:"</span>,event.clientY);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"相对于主屏幕的位置X:"</span>,event.screenX);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"相对于主屏幕的位置Y:"</span>,event.screenY);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>clientX</code>、<code>clientY</code>是鼠标相对于浏览器客户区的位置，不包括浏览器的地址栏，书签栏，底部状态栏等浏览器特性，只是文档显示区域。永远为正值。</p>
<p><code>pageX</code>、<code>pageY</code>是鼠标相对于文档的位置，即相对于document的位置。<code>pageX</code>、<code>pageY</code>和<code>clientX</code>、<code>clientY</code>和<code>body</code>的宽度无关。如果页面没有滚动的话，二者的值相等。永远为正值。</p>
<p><code>screenX</code>、<code>screenY</code>是鼠标相对于主屏幕的位置。存在负值，这就要看扩展屏幕的设置了。</p>
<h2 id="快速获取元素的绝对位置与相对位置"><a href="#快速获取元素的绝对位置与相对位置" class="headerlink" title="快速获取元素的绝对位置与相对位置"></a>快速获取元素的绝对位置与相对位置</h2><p>说到元素的绝对与相对位置都是相对于元素的左上角来说的。绝对位置就是相对于整个 html 文档的左上角的位置；相对位置就是相对于整个视口的左上角。</p>
<p><code>getBoundingClientRect</code>方法返回值是一个 DOMRect 对象，这个对象描述的是与该元素相关的CSS 边框集合。其中有<code>left</code>、<code>top</code>、<code>right</code>、<code>bottom</code>四个属性表示相对于视口的坐上角的位置，这四个属性就可以<strong>直接获取元素的相对位置</strong>。在发生滚动的时候，<code>top</code>和<code>left</code>属性值就会随之发生变化。因此，<strong>在不发生滚动的情况下，他们就是即是元素的相对位置也是元素的绝对位置</strong>。</p>
<p>如果要<strong>计算元素的滚动元素的绝对位置，我们只需要用该元素的相对位置加上文档的滚动值</strong>即可。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> element = docuemnt.getElementById(<span class="string">"my-element"</span>); <span class="comment">// 获取元素</span></span><br><span class="line"><span class="keyword">let</span> domRect = element.getBoundingClientRect(); <span class="comment">// 获取 DOMRect 对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取相对位置</span></span><br><span class="line"><span class="keyword">let</span> elementX = domRect.left;</span><br><span class="line"><span class="keyword">let</span> elementY = domRect.top;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取绝对位置</span></span><br><span class="line"><span class="keyword">let</span> X = elementX + <span class="built_in">document</span>.documentElement.scrollLeft;</span><br><span class="line"><span class="keyword">let</span> Y = elementY + <span class="built_in">document</span>.documentElement.scrollTop;</span><br></pre></td></tr></table></figure>
<h2 id="参考内容"><a href="#参考内容" class="headerlink" title="参考内容"></a>参考内容</h2><ul>
<li><a href="https://www.cnblogs.com/pelli/p/6100420.html" target="_blank" rel="noopener">web前端开发中常用的尺寸和位置</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2009/09/find_element_s_position_using_javascript.html" target="_blank" rel="noopener">用Javascript获取页面元素的位置</a></li>
</ul>
</div><div class="tags"><a href="/tags/webAPI/">webAPI</a></div><div class="post-nav"><a class="pre" href="/2020/04/04/使用PM2管理你的node应用程序/">使用 PM2 管理你的 node 应用程序</a><a class="next" href="/2019/10/07/闭包的概念与应用/">闭包的概念与应用</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=0.0.0"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=0.0.0"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=0.0.0"></script><script>var gitalk = new Gitalk({
  clientID: '842d8ecfa6d0e5202966',
  clientSecret: '95bd57bae7fb2f91b3be577a9536c051df24a5e8',
  repo: 'blog',
  owner: 'wsWangjinxu',
  admin: ['wsWangjinxu'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/API/">API</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/浏览器/">浏览器</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/前端路由/" style="font-size: 15px;">前端路由</a> <a href="/tags/Go语言学习笔记/" style="font-size: 15px;">Go语言学习笔记</a> <a href="/tags/二分查找/" style="font-size: 15px;">二分查找</a> <a href="/tags/闭包/" style="font-size: 15px;">闭包</a> <a href="/tags/webAPI/" style="font-size: 15px;">webAPI</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/类型/" style="font-size: 15px;">类型</a> <a href="/tags/RESTful/" style="font-size: 15px;">RESTful</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/04/11/【leetcode刷题笔记】1.二分查找的变种/">【leetcode刷题笔记】1.二分查找的变种</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/10/JS手写代码系列/">JS手写代码系列</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/07/Gitflow学习笔记/">Gitflow学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/04/使用PM2管理你的node应用程序/">使用 PM2 管理你的 node 应用程序</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/20/常用页面尺寸与位置的获取/">常用页面尺寸与位置的获取</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/07/闭包的概念与应用/">闭包的概念与应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/19/谈谈前端路由/">谈谈前端路由</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/05/Go命令源码文件/">Go 命令源码文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/27/JavaScript类型的细节/">JavaScript类型的细节</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/21/GOPATH和工作区/">GOPATH 和工作区</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://jackiecookie.github.io" title="jackiecookie" target="_blank">jackiecookie</a><ul></ul><a href="http://eightythousand.com/" title="手辰" target="_blank">手辰</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">似水年华.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>